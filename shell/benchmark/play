#!/bin/bash
isaac_python=~/.local/share/ov/pkg/isaac_sim-*/python.sh

checkpoint=$1
task=$( basename $(dirname $checkpoint) | cut -f 2 -d '/')

asset=$(echo $task | cut -f 2 -d '_')
algo=$(echo $task | cut -f 3 -d '_')

asset_name_map="
batten batten             \n
flat flatland             \n
plum plum_blossom_pile    \n
sup stairs_up             \n
sdown stairs_down         \n
"

asset_path=$(echo -e $asset_name_map | grep "$asset" | awk '{print $2}')

~/.local/share/ov/pkg/isaac_sim-*/python.sh \
    scripts/train_sarl.py \
    task='Benchmark' \
    train="BM_$algo" \
    max_iterations=2000 \
    headless=False \
    num_envs=20 \
    test=True \
    debug=True \
    rl_device=cpu \
    asset="./assets/config/benchmark_${asset_path}.yaml" \
    task.env.actionMode='continuous_std_6' \
    checkpoint=$checkpoint




rm -rf runs/*_$(hostname)